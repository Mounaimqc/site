<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Suivi de Commande - Amar informatique</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        .tracking-container {
            max-width: 900px;
            margin: 40px auto;
            padding: 20px;
        }

        .tracking-header {
            text-align: center;
            margin-bottom: 40px;
            border-bottom: 2px solid #e74c3c;
            padding-bottom: 20px;
        }

        .tracking-header h1 {
            color: #2c3e50;
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .tracking-header p {
            color: #7f8c8d;
            font-size: 1rem;
        }

        .search-section {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }

        .search-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .search-group input {
            flex: 1;
            min-width: 200px;
            padding: 12px 15px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
        }

        .search-group input:focus {
            outline: none;
            border-color: #e74c3c;
            box-shadow: 0 0 5px rgba(231, 76, 60, 0.3);
        }

        .search-btn {
            padding: 12px 30px;
            background-color: #e74c3c;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            font-size: 1rem;
            transition: background-color 0.3s;
        }

        .search-btn:hover {
            background-color: #c0392b;
        }

        .error-box {
            display: none;
            background-color: #f8d7da;
            color: #721c24;
            padding: 15px;
            border-radius: 5px;
            border-left: 4px solid #f5c6cb;
            margin-bottom: 20px;
        }

        .tracking-result {
            display: none;
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .tracking-result.show {
            display: block;
        }

        .order-status {
            margin-bottom: 30px;
            padding-bottom: 30px;
            border-bottom: 2px solid #eee;
        }

        .status-badge {
            display: inline-block;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .status-badge.pending {
            background-color: #fff3cd;
            color: #856404;
        }

        .status-badge.accepted {
            background-color: #d1ecf1;
            color: #0c5460;
        }

        .status-badge.shipped {
            background-color: #cfe2ff;
            color: #084298;
        }

        .status-badge.arrived {
            background-color: #d4edda;
            color: #155724;
        }

        .status-badge.returned {
            background-color: #f8d7da;
            color: #721c24;
        }

        .status-badge.processing {
            background-color: #d1ecf1;
            color: #0c5460;
        }

        .status-badge.shipped {
            background-color: #d4edda;
            color: #155724;
        }

        .status-badge.delivered {
            background-color: #c3e6cb;
            color: #155724;
        }

        .status-timeline {
            margin: 20px 0;
        }

        .timeline-step {
            display: flex;
            margin-bottom: 20px;
            align-items: flex-start;
        }

        .timeline-dot {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background-color: #ddd;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            margin-right: 20px;
            flex-shrink: 0;
            position: relative;
        }

        .timeline-dot.active {
            background-color: #e74c3c;
        }

        .timeline-dot.completed {
            background-color: #27ae60;
        }

        .timeline-dot::after {
            content: '';
            position: absolute;
            left: 50%;
            top: 30px;
            width: 2px;
            height: 50px;
            background-color: #ddd;
            transform: translateX(-50%);
        }

        .timeline-dot:last-child::after {
            display: none;
        }

        .timeline-dot.completed::after {
            background-color: #27ae60;
        }

        .timeline-content {
            flex: 1;
        }

        .timeline-title {
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 5px;
        }

        .timeline-date {
            color: #7f8c8d;
            font-size: 0.9rem;
        }

        .order-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .detail-card {
            background: #f9f9f9;
            padding: 20px;
            border-radius: 5px;
            border-left: 4px solid #e74c3c;
        }

        .detail-label {
            color: #7f8c8d;
            font-size: 0.9rem;
            margin-bottom: 5px;
        }

        .detail-value {
            color: #2c3e50;
            font-size: 1.1rem;
            font-weight: bold;
        }

        .items-summary {
            background: #f9f9f9;
            padding: 20px;
            border-radius: 5px;
            margin-bottom: 20px;
        }

        .items-summary h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            border-bottom: 2px solid #e74c3c;
            padding-bottom: 10px;
        }

        .item-row {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #eee;
        }

        .item-row:last-child {
            border-bottom: none;
        }

        .item-name {
            color: #2c3e50;
        }

        .item-price {
            color: #e74c3c;
            font-weight: bold;
        }

        .total-section {
            background: white;
            padding: 20px;
            border-radius: 5px;
            border: 2px solid #e74c3c;
        }

        .total-row {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #eee;
        }

        .total-row:last-child {
            border-bottom: none;
            font-size: 1.3rem;
            font-weight: bold;
            color: #e74c3c;
        }

        .no-result-box {
            text-align: center;
            padding: 40px 20px;
            color: #7f8c8d;
        }

        .no-result-box h2 {
            color: #2c3e50;
            margin-bottom: 10px;
        }

        footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            color: #7f8c8d;
            border-top: 1px solid #eee;
        }

        @media (max-width: 600px) {
            .tracking-container {
                margin: 20px;
            }

            .tracking-header h1 {
                font-size: 1.5rem;
            }

            .search-group {
                flex-direction: column;
            }

            .search-group input,
            .search-btn {
                width: 100%;
            }

            .order-details {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <header>
        <nav class="navbar">
            <div class="container">
                <div class="logo">
                    <h1>Amar informatique</h1>
                </div>
                <div class="nav-items">
                    <a href="index.html" style="color: white; text-decoration: none; padding: 10px 15px; background: #95a5a6; border-radius: 5px;">‚Üê Retour</a>
                </div>
            </div>
        </nav>
    </header>

    <main class="tracking-container">
        <div class="tracking-header">
            <h1>üì¶ Suivi de Commande</h1>
            <p>Entrez votre num√©ro de commande pour suivre votre achat</p>
        </div>

        <div class="search-section">
            <div class="error-box" id="errorBox"></div>
            
            <div class="search-group">
                <input type="text" id="orderNumberInput" placeholder="Exemple: #00001" autofocus>
                <button class="search-btn" onclick="searchOrder()">üîç Chercher</button>
            </div>
            <p style="color: #7f8c8d; margin-top: 10px; font-size: 0.9rem;">
                üí° Vous trouverez votre num√©ro de commande dans votre email de confirmation
            </p>
        </div>

        <div class="tracking-result" id="trackingResult">
            <!-- R√©sultat de la recherche ici -->
        </div>

        <div class="no-result-box" id="noResultBox" style="display: none;">
            <h2>üòï Commande non trouv√©e</h2>
            <p>V√©rifiez que vous avez entr√© le bon num√©ro de commande et r√©essayez</p>
        </div>
    </main>

    <footer>
        <p>üìû Vous avez une question ? Appelez-nous: <strong>0559469956</strong> ou <strong>0558843789</strong></p>
    </footer>

    <script>
        // R√©cup√©rer les commandes du localStorage
        function getCommandes() {
            const saved = localStorage.getItem('commandes');
            return saved ? JSON.parse(saved) : [];
        }

        // Chercher une commande
        function searchOrder() {
            const orderNumber = document.getElementById('orderNumberInput').value.trim().toUpperCase();
            const errorBox = document.getElementById('errorBox');
            const trackingResult = document.getElementById('trackingResult');
            const noResultBox = document.getElementById('noResultBox');

            if (!orderNumber) {
                errorBox.textContent = '‚ùå Veuillez entrer un num√©ro de commande';
                errorBox.style.display = 'block';
                trackingResult.classList.remove('show');
                noResultBox.style.display = 'none';
                return;
            }

            errorBox.style.display = 'none';
            const commandes = getCommandes();
            const commande = commandes.find(c => c.orderNumber === orderNumber);

            if (!commande) {
                trackingResult.classList.remove('show');
                noResultBox.style.display = 'block';
                return;
            }

            noResultBox.style.display = 'none';
            displayTrackingInfo(commande);
            trackingResult.classList.add('show');
        }

        // Afficher les informations de suivi
        function displayTrackingInfo(commande) {
            const date = new Date(commande.date);
            const formattedDate = date.toLocaleDateString('fr-FR', { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });

            const status = commande.status || 'pending';
            const statusLabel = getStatusLabel(status);
            const statusBadgeClass = getStatusBadgeClass(status);

            const trackingResult = document.getElementById('trackingResult');
            
            // D√©terminer quelles √©tapes sont compl√©t√©es et active
            const isAccepted = ['accepted', 'shipped', 'arrived'].includes(status);
            const isShipped = ['shipped', 'arrived'].includes(status);
            const isArrived = status === 'arrived';
            const isReturned = status === 'returned';

            trackingResult.innerHTML = `
                <div class="order-status">
                    <h2>${commande.orderNumber}</h2>
                    <span class="status-badge ${statusBadgeClass}">${statusLabel}</span>
                    <p style="color: #7f8c8d; margin-top: 10px;">Commande pass√©e le: ${formattedDate}</p>

                    <div class="status-timeline" style="margin-top: 30px;">
                        <div class="timeline-step">
                            <div class="timeline-dot completed">‚úì</div>
                            <div class="timeline-content">
                                <div class="timeline-title">Commande Confirm√©e</div>
                                <div class="timeline-date">${formattedDate}</div>
                            </div>
                        </div>
                        
                        <div class="timeline-step">
                            <div class="timeline-dot ${isAccepted ? 'completed' : (status === 'pending' ? 'active' : '')}">
                                ${isAccepted ? '‚úì' : (status === 'pending' ? '‚óà' : '')}
                            </div>
                            <div class="timeline-content">
                                <div class="timeline-title">Commande Accept√©e</div>
                                <div class="timeline-date">${isAccepted ? 'Valid√©e par le vendeur' : 'En attente de validation'}</div>
                            </div>
                        </div>
                        
                        <div class="timeline-step">
                            <div class="timeline-dot ${isShipped ? 'completed' : (status === 'accepted' ? 'active' : '')}">
                                ${isShipped ? '‚úì' : (status === 'accepted' ? '‚óà' : '')}
                            </div>
                            <div class="timeline-content">
                                <div class="timeline-title">${commande.orderType === 'domicile' ? 'En Cours de Livraison' : 'Pr√™t pour Retrait'}</div>
                                <div class="timeline-date">${isShipped ? 'Votre commande est en route' : '√Ä venir'}</div>
                            </div>
                        </div>
                        
                        <div class="timeline-step">
                            <div class="timeline-dot ${isArrived ? 'completed' : (status === 'shipped' ? 'active' : '')}">
                                ${isArrived ? '‚úì' : (status === 'shipped' ? '‚óà' : '')}
                            </div>
                            <div class="timeline-content">
                                <div class="timeline-title">Livraison Compl√©t√©e</div>
                                <div class="timeline-date">${isArrived ? 'Commande re√ßue ‚úì' : '√Ä venir'}</div>
                            </div>
                        </div>

                        ${isReturned ? `
                        <div class="timeline-step">
                            <div class="timeline-dot completed" style="background-color: #f39c12;">‚Ü©Ô∏è</div>
                            <div class="timeline-content">
                                <div class="timeline-title">Commande Retourn√©e</div>
                                <div class="timeline-date">Votre commande a √©t√© retourn√©e</div>
                            </div>
                        </div>
                        ` : ''}
                    </div>
                </div>

                <div class="order-details">
                    <div class="detail-card">
                        <div class="detail-label">üë§ CLIENT</div>
                        <div class="detail-value">${commande.firstName} ${commande.lastName}</div>
                    </div>
                    
                    <div class="detail-card">
                        <div class="detail-label">üìç TYPE DE LIVRAISON</div>
                        <div class="detail-value">${commande.orderType === 'domicile' ? 'üè† √Ä Domicile' : 'üè™ Stop Desk'}</div>
                    </div>
                    
                    <div class="detail-card">
                        <div class="detail-label">üìû T√âL√âPHONE</div>
                        <div class="detail-value">${commande.phone1}</div>
                    </div>
                    
                    <div class="detail-card">
                        <div class="detail-label">üìç WILAYA</div>
                        <div class="detail-value">${commande.wilaya}</div>
                    </div>
                    
                    <div class="detail-card">
                        <div class="detail-label">üèòÔ∏è COMMUNE</div>
                        <div class="detail-value">${commande.commune}</div>
                    </div>
                    
                    <div class="detail-card">
                        <div class="detail-label">üí∞ TOTAL</div>
                        <div class="detail-value" style="color: #e74c3c;">${commande.grandTotal.toFixed(2)} DA</div>
                    </div>
                </div>

                <div class="items-summary">
                    <h3>üì¶ Produits Command√©s</h3>
                    ${commande.cartItems.map(item => `
                        <div class="item-row">
                            <span class="item-name">${item.name} <small>(x${item.quantity})</small></span>
                            <span class="item-price">${(item.price * item.quantity).toFixed(2)} DA</span>
                        </div>
                    `).join('')}
                </div>

                <div class="total-section">
                    <div class="total-row">
                        <span>Sous-total:</span>
                        <span>${commande.cartTotal.toFixed(2)} DA</span>
                    </div>
                    <div class="total-row">
                        <span>Frais de livraison:</span>
                        <span>${commande.shippingPrice.toFixed(2)} DA</span>
                    </div>
                    <div class="total-row">
                        <span>üí∞ TOTAL:</span>
                        <span>${commande.grandTotal.toFixed(2)} DA</span>
                    </div>
                </div>
            `;
        }

        // Obtenir le label du statut
        function getStatusLabel(status) {
            const statusMap = {
                'pending': '‚è≥ En Attente',
                'accepted': '‚úì Accept√©e',
                'shipped': 'üöö En Route',
                'arrived': 'üì¶ Arriv√©e',
                'returned': '‚Ü©Ô∏è Retourn√©e'
            };
            return statusMap[status] || '‚è≥ En Attente';
        }

        // Obtenir la classe CSS pour le badge du statut
        function getStatusBadgeClass(status) {
            const classMap = {
                'pending': 'pending',
                'accepted': 'accepted',
                'shipped': 'shipped',
                'arrived': 'arrived',
                'returned': 'returned'
            };
            return classMap[status] || 'pending';
        }

        // Rechercher quand on appuie sur Entr√©e
        document.getElementById('orderNumberInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                searchOrder();
            }
        });
    </script>
</body>
</html>
